
#!/bin/sh



   m1=$(mount | grep "/compat/linux/" )
   m2=$(mount | grep "/compat/linux/proc" )
   m3=$(mount | grep "/compat/linux/dev/shm" )





       export LD_LIBRARY_PATH=$HOME/.local/share/Steam/ubuntu12_32
     

  

 

    if  [ -z "$m1" ]; then 
       echo 'не смонтировано1'
       sudo mount -t nullfs /compat/ubuntu/ /compat/linux/

    fi


   if  [ -z "$m2" ]; then 
       echo 'не смонтировано2'
       sudo mount -t linprocfs linproc /compat/linux/proc

    
         fi

       

   if  [ -z "$m3" ]; then
                       echo 'не смонтировано3'
                        
                 sudo mount -t tmpfs tmpfs /compat/linux/dev/shm
                       
              fi



       
       sudo chmod 1777 /compat/linux/dev/shm
       mkdir -p  $HOME/.steam/sdk32/
       sudo chmod 1777 /compat/linux/tmp

  
      if ! [ -f $HOME/.steam/steam/ubuntu12_32/steamwebhelper ]; then

           cp    $HOME/steamwebhelper      $HOME/.steam/steam/ubuntu12_32/

       fi



       if ! [ -f $HOME/.steam/sdk32/steamclient.so ]; then

           ln -s    $HOME/.steam/steam/linux32/steamclient.so       $HOME/.steam/sdk32/steamclient.so

       fi

       
       $HOME/.local/share/Steam/ubuntu12_32/steam  $1 &

       sleep 2 

      mv $HOME/.steam/steam/ubuntu12_32/steamwebhelper $HOME 


   while ! [  -z "$(ps aux | grep "[/]home/definitly/.local/share/Steam/ubuntu12_32/steam" | head -n 1 | awk '{ print $2 }')" ] 
    do
 
   sleep 1.5

   done 
 




       sudo umount -f /compat/linux/proc
       sudo umount -f  /compat/linux/dev/shm
       sudo umount -f  /compat/linux

      if  [  -z "$(mount | grep linprocfs )" ]; then
        sudo mount -t linprocfs linproc /compat/linux/proc
        fi


       