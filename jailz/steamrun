#!/bin/sh



  #unmount  /compat/linux/proc if mounted
       
      

      if  [ -z "$(mount | grep linprocfs)" ]; then 
       echo 'не смонтировано2  go away '

       else
       sudo   umount  /compat/linux/proc

      fi
                 




 

    if  [ -z "$(mount | grep nullfs )" ]; then 
       echo 'не смонтировано1'
       sudo mount -t nullfs /compat/ubuntu/ /compat/linux/

    fi


   if  [ -z "$(mount | grep linprocfs)" ]; then 
       echo 'не смонтировано2'
       sudo mount -t linprocfs linproc /compat/linux/proc

    fi

       

   if  [ -z "$(mount | grep tmpfs)" ]; then
       echo 'не смонтировано3'
       sudo mount -t tmpfs tmpfs /compat/linux/dev/shm
                       
   fi



    if  [ -z "$(mount | grep linsysfs)" ]; then
       echo 'не смонтировано4'
       sudo mount -t linsysfs linsys /compat/linux/sys
                       
   fi



       
       sudo chmod 1777 /compat/linux/dev/shm
       mkdir -p  $HOME/.steam/sdk32/
       sudo chmod 1777 /compat/linux/tmp

  
      if ! [ -f $HOME/.steam/steam/ubuntu12_32/steamwebhelper ]; then

           cp    $HOME/steamwebhelper      $HOME/.steam/steam/ubuntu12_32/

       fi



       if ! [ -f $HOME/.steam/sdk32/steamclient.so ]; then

           ln -s    $HOME/.steam/steam/linux32/steamclient.so       $HOME/.steam/sdk32/steamclient.so

       fi

              export LD_LIBRARY_PATH=$HOME/.local/share/Steam/ubuntu12_32
       
              $HOME/.local/share/Steam/ubuntu12_32/steam  $1 &

       sleep 2 

      mv $HOME/.steam/steam/ubuntu12_32/steamwebhelper $HOME 


   while ! [  -z "$(ps aux | grep "[/]home/definitly/.local/share/Steam/ubuntu12_32/steam")" ] 

   do
   sleep 1.5

   done 
 




       sudo umount -f /compat/linux/proc
       sudo umount -f  /compat/linux/dev/shm
       sudo umount -f  /compat/linux/sys
       sudo umount -f  /compat/linux

      if  [  -z "$(mount | grep linprocfs )" ]; then
          sudo mount -t linprocfs linproc /compat/linux/proc
      fi


       